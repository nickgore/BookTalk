{"uuid":"69c6ccfc-42b8-11f0-8c2d-ff1e21638e5c","page":{"id":8,"data":{"appState":"[\"~#iR\",[\"^ \",\"n\",\"appTemplate\",\"v\",[\"^ \",\"appMaxWidth\",\"100%\",\"appStyles\",\"\",\"appTesting\",null,\"appThemeId\",null,\"appThemeModeId\",null,\"appThemeName\",null,\"createdAt\",null,\"customComponentCollections\",[],\"customDocumentTitle\",\"\",\"customDocumentTitleEnabled\",false,\"customShortcuts\",[],\"experimentalDataTabEnabled\",true,\"experimentalFeatures\",[\"^ \",\"disableMultiplayerEditing\",false,\"multiplayerEditingEnabled\",false,\"sourceControlTemplateDehydration\",false],\"folders\",[\"~#iL\",[]],\"formAppSettings\",[\"^ \",\"customRedirectUrl\",\"\"],\"inAppRetoolPillAppearance\",\"NO_OVERRIDE\",\"instrumentationEnabled\",false,\"internationalizationSettings\",[\"^ \",\"internationalizationEnabled\",false,\"internationalizationFiles\",[]],\"isFetching\",false,\"isFormApp\",false,\"isGlobalWidget\",false,\"isMobileApp\",false,\"loadingIndicatorsDisabled\",false,\"markdownLinkBehavior\",\"auto\",\"mobileAppSettings\",[\"^ \",\"displaySetting\",[\"^ \",\"landscapeMode\",false,\"tabletMode\",false],\"mobileOfflineModeBannerMode\",\"default\",\"mobileOfflineModeDelaySync\",false,\"mobileOfflineModeEnabled\",false],\"mobileOfflineAssets\",[],\"multiScreenMobileApp\",false,\"notificationsSettings\",[\"^ \",\"globalQueryShowFailureToast\",true,\"globalQueryShowSuccessToast\",false,\"globalQueryToastDuration\",4.5,\"globalToastPosition\",\"bottomRight\"],\"pageCodeFolders\",[\"^ \"],\"pageLoadValueOverrides\",[\"^B\",[]],\"persistUrlParams\",false,\"plugins\",[\"~#iOM\",[\"page1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"page1\",\"uuid\",\"64cc86ff-dbef-4be7-97b5-d4fe76cc4710\",\"type\",\"screen\",\"subtype\",\"Screen\",\"namespace\",null,\"resourceName\",null,\"resourceDisplayName\",null,\"template\",[\"~#iM\",[\"title\",\"Page 1\",\"browserTitle\",\"\",\"urlSlug\",\"\",\"_searchParams\",[\"^B\",[]],\"_hashParams\",[\"^B\",[]],\"_customShortcuts\",[\"^B\",[]]]],\"style\",null,\"position2\",null,\"mobilePosition2\",null,\"mobileAppPosition\",null,\"tabIndex\",null,\"container\",\"\",\"^7\",\"~m1749202026440\",\"updatedAt\",\"~m1749202026440\",\"folder\",\"\",\"presetName\",null,\"screen\",null,\"boxId\",null,\"subBoxIds\",null]]],\"$main\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"$main\",\"^17\",null,\"^18\",\"frame\",\"^19\",\"Frame\",\"^1:\",null,\"^1;\",null,\"^1<\",null,\"^1=\",[\"^1>\",[\"type\",\"main\",\"padding\",\"8px 12px\",\"enableFullBleed\",false,\"isHiddenOnDesktop\",false,\"isHiddenOnMobile\",false]],\"^1?\",[\"^1>\",[]],\"^1@\",null,\"^1A\",null,\"^1B\",null,\"^1C\",null,\"^1D\",\"\",\"^7\",\"~m1749202026440\",\"^1E\",\"~m1749202026440\",\"^1F\",\"\",\"^1G\",null,\"^1H\",\"page1\",\"^1I\",null,\"^1J\",null]]],\"text1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"text1\",\"^17\",\"e27e9f17-0833-4e3b-b90b-f43bd31edecf\",\"^18\",\"widget\",\"^19\",\"TextWidget2\",\"^1:\",null,\"^1;\",null,\"^1<\",null,\"^1=\",[\"^1>\",[\"heightType\",\"fixed\",\"horizontalAlign\",\"left\",\"hidden\",false,\"imageWidth\",\"fit\",\"margin\",\"4px 8px\",\"showInEditor\",false,\"verticalAlign\",\"top\",\"tooltipText\",\"\",\"value\",\"{{\\n  chatHistory.value.length > 0 \\n    ? chatHistory.value.map(message => \\n        `**${message.role === 'user' ? 'You' : 'BookTalkAssistant'}** (${message.timestamp})\\\\n${message.content}`\\n      ).join('\\\\n\\\\n---\\\\n\\\\n')\\n    : \\\"ðŸ‘‹ Ask me anything...\\\"\\n}}\",\"disableMarkdown\",false,\"overflowType\",\"scroll\",\"maintainSpaceWhenHidden\",false]],\"^1?\",[\"^1>\",[]],\"^1@\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^18\",\"grid\",\"^1D\",\"\",\"rowGroup\",\"body\",\"subcontainer\",\"\",\"row\",0.20000000000000018,\"col\",1,\"height\",13.2,\"width\",10,\"tabNum\",0,\"stackPosition\",null]]],\"^1A\",null,\"^1B\",null,\"^1C\",null,\"^1D\",\"\",\"^7\",\"~m1749205998842\",\"^1E\",\"~m1749560621668\",\"^1F\",\"\",\"^1G\",null,\"^1H\",\"page1\",\"^1I\",null,\"^1J\",null]]],\"textInput1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"textInput1\",\"^17\",\"281dbb02-96c3-4a79-b000-3d380f072c87\",\"^18\",\"widget\",\"^19\",\"TextInputWidget2\",\"^1:\",null,\"^1;\",null,\"^1<\",null,\"^1=\",[\"^1>\",[\"spellCheck\",false,\"readOnly\",false,\"iconAfter\",\"\",\"showCharacterCount\",false,\"autoComplete\",false,\"enforceMaxLength\",false,\"maxLength\",null,\"hidden\",false,\"customValidation\",\"\",\"patternType\",\"\",\"hideValidationMessage\",false,\"textBefore\",\"\",\"validationMessage\",\"\",\"margin\",\"4px 8px\",\"textAfter\",\"\",\"showInEditor\",false,\"showClear\",false,\"pattern\",\"\",\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",\"\",\"style\",[\"^1>\",[]],\"labelCaption\",\"\",\"labelWidth\",\"33\",\"autoFill\",\"\",\"placeholder\",\"Type your question...\\n\",\"label\",\"\",\"_validate\",false,\"labelWidthUnit\",\"%\",\"invalid\",false,\"iconBefore\",\"\",\"minLength\",null,\"inputTooltip\",\"\",\"events\",[\"^B\",[[\"^1>\",[\"event\",\"submit\",\"type\",\"datasource\",\"method\",\"trigger\",\"pluginId\",\"\",\"targetId\",null,\"params\",[\"^1>\",[]],\"waitType\",\"debounce\",\"waitMs\",\"0\"]]]],\"autoCapitalize\",\"none\",\"loading\",false,\"disabled\",false,\"labelPosition\",\"top\",\"labelWrap\",false,\"maintainSpaceWhenHidden\",false,\"required\",false]],\"^1?\",[\"^1>\",[]],\"^1@\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^18\",\"grid\",\"^1D\",\"\",\"^1K\",\"body\",\"^1L\",\"\",\"row\",13.399999999999999,\"col\",1,\"^1M\",0.2,\"^1N\",9,\"^1O\",0,\"^1P\",null]]],\"^1A\",null,\"^1B\",null,\"^1C\",null,\"^1D\",\"\",\"^7\",\"~m1749206114525\",\"^1E\",\"~m1749206353628\",\"^1F\",\"\",\"^1G\",null,\"^1H\",\"page1\",\"^1I\",null,\"^1J\",null]]],\"button1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"button1\",\"^17\",\"5469c7eb-fefe-4ff3-98bf-83368f114ce7\",\"^18\",\"widget\",\"^19\",\"ButtonWidget2\",\"^1:\",null,\"^1;\",null,\"^1<\",null,\"^1=\",[\"^1>\",[\"heightType\",\"fixed\",\"horizontalAlign\",\"stretch\",\"clickable\",false,\"iconAfter\",\"\",\"submitTargetId\",null,\"hidden\",false,\"ariaLabel\",\"\",\"text\",\"Send\",\"margin\",\"4px 8px\",\"showInEditor\",false,\"tooltipText\",\"\",\"allowWrap\",true,\"styleVariant\",\"solid\",\"submit\",false,\"iconBefore\",\"\",\"events\",[\"^B\",[[\"^1>\",[\"event\",\"click\",\"type\",\"datasource\",\"method\",\"trigger\",\"pluginId\",\"query2\",\"targetId\",null,\"params\",[\"^1>\",[]],\"waitType\",\"debounce\",\"waitMs\",\"0\"]]]],\"loading\",false,\"loaderPosition\",\"auto\",\"disabled\",false,\"maintainSpaceWhenHidden\",false]],\"^1?\",[\"^1>\",[]],\"^1@\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^18\",\"grid\",\"^1D\",\"\",\"^1K\",\"body\",\"^1L\",\"\",\"row\",13.399999999999999,\"col\",10,\"^1M\",1,\"^1N\",1,\"^1O\",0,\"^1P\",null]]],\"^1A\",null,\"^1B\",null,\"^1C\",null,\"^1D\",\"\",\"^7\",\"~m1749206429872\",\"^1E\",\"~m1749560570654\",\"^1F\",\"\",\"^1G\",null,\"^1H\",\"page1\",\"^1I\",null,\"^1J\",null]]],\"query1\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"query1\",\"^17\",null,\"^18\",\"datasource\",\"^19\",\"RESTQuery\",\"^1:\",null,\"^1;\",\"REST-WithoutResource\",\"^1<\",null,\"^1=\",[\"^1>\",[\"queryRefreshTime\",\"\",\"paginationLimit\",\"\",\"allowedGroupIds\",[\"^B\",[]],\"streamResponse\",false,\"body\",\"{\\n  \\\"model\\\": \\\"gpt-3.5-turbo\\\",\\n  \\\"messages\\\": {{\\n    [{\\n      \\\"role\\\": \\\"system\\\",\\n      \\\"content\\\": systemPrompt.value\\n    }].concat(\\n      chatHistory.value.map(msg => ({\\n        role: msg.role,\\n        content: msg.content\\n      }))\\n    )\\n  }},\\n  \\\"max_tokens\\\": 500\\n}\",\"lastReceivedFromResourceAt\",null,\"isFunction\",false,\"functionParameters\",null,\"queryDisabledMessage\",\"\",\"servedFromCache\",false,\"offlineUserQueryInputs\",\"\",\"functionDescription\",null,\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"workflowParams\",null,\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",false,\"paginationPaginationField\",\"\",\"workflowRunExecutionType\",\"sync\",\"headers\",\"[{\\\"key\\\":\\\"Authorization\\\",\\\"value\\\":\\\"Bearer {{ apiKeyInput.value }}\\\"},{\\\"key\\\":\\\"Content-Type\\\",\\\"value\\\":\\\"application/json\\\"}]\",\"showFailureToaster\",true,\"paginationEnabled\",false,\"query\",\"https://api.openai.com/v1/chat/completions\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"error\",null,\"workflowRunBodyType\",\"raw\",\"privateParams\",[\"^B\",[]],\"queryRunOnSelectorUpdate\",false,\"runWhenPageLoadsDelay\",\"\",\"data\",null,\"importedQueryInputs\",[\"^1>\",[]],\"_additionalScope\",[\"^B\",[\"customMessages\"]],\"isImported\",false,\"showSuccessToaster\",true,\"cacheKeyTtl\",\"\",\"requestSentTimestamp\",null,\"cookies\",\"\",\"metadata\",null,\"queryRunTime\",null,\"changesetObject\",\"\",\"offlineOptimisticResponse\",null,\"errorTransformer\",\"return data.error\",\"finished\",null,\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"resourceTypeOverride\",\"\",\"watchedParams\",[\"^B\",[]],\"enableErrorTransformer\",false,\"showLatestVersionUpdatedWarning\",false,\"paginationDataField\",\"\",\"timestamp\",0,\"importedQueryDefaults\",[\"^1>\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"version\",2,\"overrideOrgCacheForUserCache\",false,\"runWhenPageLoads\",false,\"transformer\",\"return data\",\"events\",null,\"isMultiplayerEdited\",false,\"queryTimeout\",\"10000\",\"workflowId\",null,\"requireConfirmation\",false,\"type\",\"POST\",\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^B\",[]],\"bodyType\",\"raw\",\"offlineQueryType\",\"None\",\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",\"\"]],\"^1?\",null,\"^1@\",null,\"^1A\",null,\"^1B\",null,\"^1C\",null,\"^1D\",\"\",\"^7\",\"~m1749214548762\",\"^1E\",\"~m1749631719681\",\"^1F\",\"\",\"^1G\",null,\"^1H\",\"page1\",\"^1I\",null,\"^1J\",null]]],\"apiKeyInput\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"apiKeyInput\",\"^17\",\"c1820321-4bcc-44b8-b3ec-68dbd2cdb604\",\"^18\",\"widget\",\"^19\",\"TextInputWidget2\",\"^1:\",null,\"^1;\",null,\"^1<\",null,\"^1=\",[\"^1>\",[\"spellCheck\",false,\"readOnly\",false,\"iconAfter\",\"\",\"showCharacterCount\",false,\"autoComplete\",false,\"enforceMaxLength\",false,\"maxLength\",null,\"hidden\",false,\"customValidation\",\"\",\"patternType\",\"\",\"hideValidationMessage\",false,\"textBefore\",\"\",\"validationMessage\",\"\",\"margin\",\"4px 8px\",\"textAfter\",\"\",\"showInEditor\",false,\"showClear\",false,\"pattern\",\"\",\"tooltipText\",\"\",\"labelAlign\",\"left\",\"formDataKey\",\"{{ self.id }}\",\"value\",\"\",\"labelCaption\",\"\",\"labelWidth\",\"33\",\"autoFill\",\"\",\"placeholder\",\"Enter value\",\"label\",\"* Personal Chat API key:\\n\",\"_validate\",false,\"labelWidthUnit\",\"%\",\"invalid\",false,\"iconBefore\",\"\",\"minLength\",null,\"inputTooltip\",\"\",\"events\",[\"^16\",[]],\"autoCapitalize\",\"none\",\"loading\",false,\"disabled\",false,\"labelPosition\",\"top\",\"labelWrap\",false,\"maintainSpaceWhenHidden\",false,\"required\",false]],\"^1?\",[\"^1>\",[]],\"^1@\",[\"^0\",[\"^ \",\"n\",\"position2\",\"v\",[\"^ \",\"^18\",\"grid\",\"^1D\",\"\",\"^1K\",\"body\",\"^1L\",\"\",\"row\",0,\"col\",1,\"^1M\",0.2,\"^1N\",4,\"^1O\",0,\"^1P\",null]]],\"^1A\",null,\"^1B\",null,\"^1C\",null,\"^1D\",\"\",\"^7\",\"~m1749227246637\",\"^1E\",\"~m1749227297992\",\"^1F\",\"\",\"^1G\",null,\"^1H\",\"page1\",\"^1I\",null,\"^1J\",null]]],\"chatHistory\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"chatHistory\",\"^17\",null,\"^18\",\"state\",\"^19\",\"State\",\"^1:\",null,\"^1;\",null,\"^1<\",null,\"^1=\",[\"^1>\",[\"value\",\"[]\"]],\"^1?\",null,\"^1@\",null,\"^1A\",null,\"^1B\",null,\"^1C\",null,\"^1D\",\"\",\"^7\",\"~m1749559674536\",\"^1E\",\"~m1749559678668\",\"^1F\",\"\",\"^1G\",null,\"^1H\",\"page1\",\"^1I\",null,\"^1J\",null]]],\"query2\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"query2\",\"^17\",null,\"^18\",\"datasource\",\"^19\",\"JavascriptQuery\",\"^1:\",null,\"^1;\",\"JavascriptQuery\",\"^1<\",null,\"^1=\",[\"^1>\",[\"queryRefreshTime\",\"\",\"allowedGroupIds\",[\"^B\",[]],\"streamResponse\",false,\"lastReceivedFromResourceAt\",null,\"isFunction\",false,\"functionParameters\",null,\"queryDisabledMessage\",\"\",\"servedFromCache\",false,\"offlineUserQueryInputs\",\"\",\"functionDescription\",null,\"successMessage\",\"\",\"queryDisabled\",\"\",\"playgroundQuerySaveId\",\"latest\",\"workflowParams\",null,\"resourceNameOverride\",\"\",\"runWhenModelUpdates\",false,\"workflowRunExecutionType\",\"sync\",\"showFailureToaster\",true,\"query\",\"const userMessage = textInput1.value;\\nif (!userMessage.trim()) return;\\n\\n// Update chat history with user message\\nconst newHistory = [\\n  ...chatHistory.value,\\n  {\\n    role: \\\"user\\\",\\n    content: userMessage,\\n    timestamp: new Date().toLocaleTimeString()\\n  }\\n];\\n\\nawait chatHistory.setValue(newHistory);\\nawait textInput1.setValue(\\\"\\\");\\n\\n// Now trigger query (it will read from updated chatHistory.value)\\nawait query1.trigger({\\n  onSuccess: function(response) {\\n    console.log(\\\"Response passed to callback:\\\", response);\\n    \\n    // Try to get content from the response parameter\\n    let content = response.choices[0].message.content;\\n    \\n    if (content) {\\n      const assistantMessage = {\\n        role: \\\"assistant\\\",\\n        content: content,\\n        timestamp: new Date().toLocaleTimeString()\\n      };\\n      \\n      chatHistory.setValue([...newHistory, assistantMessage]);\\n    } else {\\n      console.error(\\\"No content found in response or query1.data\\\");\\n    }\\n  }\\n});\",\"playgroundQueryUuid\",\"\",\"playgroundQueryId\",null,\"error\",null,\"workflowRunBodyType\",\"raw\",\"privateParams\",[\"^B\",[]],\"queryRunOnSelectorUpdate\",false,\"runWhenPageLoadsDelay\",\"\",\"data\",null,\"importedQueryInputs\",[\"^1>\",[]],\"_additionalScope\",[\"^B\",[]],\"isImported\",false,\"showSuccessToaster\",false,\"cacheKeyTtl\",\"\",\"requestSentTimestamp\",null,\"metadata\",null,\"queryRunTime\",null,\"changesetObject\",\"\",\"offlineOptimisticResponse\",null,\"errorTransformer\",\"return data.error\",\"finished\",null,\"confirmationMessage\",null,\"isFetching\",false,\"changeset\",\"\",\"rawData\",null,\"queryTriggerDelay\",\"0\",\"resourceTypeOverride\",null,\"watchedParams\",[\"^B\",[]],\"enableErrorTransformer\",false,\"showLatestVersionUpdatedWarning\",false,\"timestamp\",0,\"importedQueryDefaults\",[\"^1>\",[]],\"enableTransformer\",false,\"showUpdateSetValueDynamicallyToggle\",true,\"overrideOrgCacheForUserCache\",false,\"runWhenPageLoads\",false,\"transformer\",\"return data\",\"events\",[\"^B\",[]],\"isMultiplayerEdited\",false,\"queryTimeout\",\"10000\",\"workflowId\",null,\"requireConfirmation\",false,\"queryFailureConditions\",\"\",\"changesetIsObject\",false,\"enableCaching\",false,\"allowedGroups\",[\"^B\",[]],\"offlineQueryType\",\"None\",\"queryThrottleTime\",\"750\",\"updateSetValueDynamically\",false,\"notificationDuration\",4.5]],\"^1?\",null,\"^1@\",null,\"^1A\",null,\"^1B\",null,\"^1C\",null,\"^1D\",\"\",\"^7\",\"~m1749560455271\",\"^1E\",\"~m1749573216116\",\"^1F\",\"\",\"^1G\",null,\"^1H\",\"page1\",\"^1I\",null,\"^1J\",null]]],\"systemPrompt\",[\"^0\",[\"^ \",\"n\",\"pluginTemplate\",\"v\",[\"^ \",\"id\",\"systemPrompt\",\"^17\",null,\"^18\",\"state\",\"^19\",\"State\",\"^1:\",null,\"^1;\",null,\"^1<\",null,\"^1=\",[\"^1>\",[\"value\",\"\\\"You are a JavaScript-only programming assistant. Answer ONLY JavaScript-related questions (syntax, frameworks like React/Node.js, libraries, debugging, etc.). For any non-JavaScript questions, respond: \\\\\\\"I can only help with JavaScript programming questions.\\\\\\\"\\\"\"]],\"^1?\",null,\"^1@\",null,\"^1A\",null,\"^1B\",null,\"^1C\",null,\"^1D\",\"\",\"^7\",\"~m1749573902747\",\"^1E\",\"~m1749573905720\",\"^1F\",\"\",\"^1G\",null,\"^1H\",\"page1\",\"^1I\",null,\"^1J\",null]]]]],\"preloadedAppJavaScript\",null,\"preloadedAppJSLinks\",[],\"queryStatusVisibility\",false,\"responsiveLayoutDisabled\",false,\"rootScreen\",\"page1\",\"savePlatform\",\"web\",\"shortlink\",null,\"testEntities\",[],\"tests\",[],\"urlFragmentDefinitions\",[\"^B\",[]],\"version\",\"3.196.5\",\"serializedLayout\",null,\"agentEvals\",[\"^ \"]]]]"},"changesRecord":[],"changesRecordV2":[{"data":{"op":"update","ids":[null],"tag":"plugin"},"type":"diff","version":1},{"data":{"op":"update","ids":["query1"],"tag":"plugin"},"type":"diff","version":1}],"gitSha":null,"checksum":null,"multiplayerSessionId":null,"createdAt":"2025-06-11T08:48:39.836Z","updatedAt":"2025-06-11T08:48:39.836Z","pageId":6,"userId":1},"modules":{}}